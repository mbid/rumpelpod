{
    "build": {
        "dockerfile": "Dockerfile",
        "args": {
            "BASE_IMAGE": "${localEnv:BASE_IMAGE:debian:trixie}"
        }
    },
    "containerEnv": {
        "ANTHROPIC_API_KEY": "${localEnv:ANTHROPIC_API_KEY}",
        "XAI_API_KEY": "${localEnv:XAI_API_KEY}",
        "GEMINI_API_KEY": "${localEnv:GEMINI_API_KEY}",
        "MACOS_SSH_PRIVATE_KEY": "${localEnv:MACOS_SSH_PRIVATE_KEY}",
        "MACOS_SSH_CONFIG": "${localEnv:MACOS_SSH_CONFIG}",
        "MACOS_SSH_KNOWN_HOSTS": "${localEnv:MACOS_SSH_KNOWN_HOSTS}",
        "RUMPELPOD_TEST_SYSTEMD": "1"
    },
    "postStartCommand": "if [ -n \"$MACOS_SSH_PRIVATE_KEY\" ]; then mkdir -p ~/.ssh && chmod 700 ~/.ssh && echo \"$MACOS_SSH_PRIVATE_KEY\" | base64 -d > ~/.ssh/macos_id && chmod 600 ~/.ssh/macos_id && echo \"$MACOS_SSH_CONFIG\" | base64 -d >> ~/.ssh/config && echo \"$MACOS_SSH_KNOWN_HOSTS\" | base64 -d >> ~/.ssh/known_hosts; fi",
    "runArgs": [
        "--runtime=sysbox-runc"
    ],
    "containerUser": "dev"
}
